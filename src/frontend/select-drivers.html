<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="css/styles.css" />
		<title>Fantasy App - Select Drivers</title>
		<meta
			name="description"
			content="Select your fantasy racing team drivers within budget constraints"
		/>
	</head>
	<body>
		<!-- Main Driver Selection Interface -->
		<div id="driver-selection" style="display: none" role="main">
			<header class="header" role="banner">
				<div class="header-main">
					<div class="header-content">
						<div class="header-title">
							<h1>Select Drivers</h1>
							<p class="header-subtitle">
								Budget:
								<span
									class="currency-group"
									aria-label="Total budget"
								>
									£<span id="budget-display">Loading</span>
								</span>
								<span class="divider" aria-hidden="true"
									>|</span
								>
								Used:
								<span
									class="currency-group"
									aria-label="Budget used"
								>
									£<span id="budget-used">0</span>
								</span>
							</p>
						</div>
						<nav
							class="header-actions"
							role="navigation"
							aria-label="Main actions"
						>
							<button
								id="dashboard-btn"
								class="btn btn-secondary"
								type="button"
								aria-label="Go to dashboard"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
									></path>
								</svg>
								Dashboard
							</button>
							<button
								id="logout-btn"
								class="btn btn-danger"
								type="button"
								aria-label="Logout from application"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
									></path>
								</svg>
								Logout
							</button>
						</nav>
					</div>
				</div>
			</header>

			<main class="container" style="padding: var(--spacing-4)">
				<!-- Race Information Section -->
				<section
					class="card"
					style="margin-bottom: var(--spacing-6)"
					id="current-race-info"
					aria-labelledby="race-info-heading"
				>
					<header class="card-header">
						<h2 id="race-info-heading">Upcoming Race</h2>
						<div class="flex items-center gap-2">
							<button
								id="refresh-race-btn"
								class="btn btn-sm btn-secondary"
								type="button"
								aria-label="Refresh race information"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
									></path>
								</svg>
								Refresh
							</button>
						</div>
					</header>
					<div class="card-body">
						<dl class="race-info-grid">
							<div class="race-detail-item">
								<dt>Track</dt>
								<dd id="current-race-name">Loading...</dd>
							</div>
							<div class="race-detail-item">
								<dt>Round</dt>
								<dd id="current-race-round">-</dd>
							</div>
							<div class="race-detail-item">
								<dt>Location</dt>
								<dd id="current-race-location">-</dd>
							</div>
							<div class="race-detail-item">
								<dt>Submission Deadline</dt>
								<dd id="race-deadline">-</dd>
							</div>
						</dl>
						<div class="race-status-container">
							<div class="race-status-badge">
								<span
									id="race-status"
									class="race-status open"
									role="status"
									aria-live="polite"
									>Loading status...</span
								>
							</div>
						</div>
					</div>
				</section>

				<!-- Deadline Warning -->
				<div
					id="deadline-warning"
					class="deadline-warning"
					style="display: none"
					role="alert"
					aria-live="assertive"
				>
					<svg
						width="20"
						height="20"
						fill="none"
						stroke="currentColor"
						viewBox="0 0 24 24"
						aria-hidden="true"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="2"
							d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
						></path>
					</svg>
					<span>Deadline information will appear here</span>
				</div>

				<!-- Team Summary Section -->
				<section
					class="card"
					style="margin-bottom: var(--spacing-8)"
					aria-labelledby="team-summary-heading"
				>
					<header class="card-header">
						<h2 id="team-summary-heading">Your Team Summary</h2>
						<div class="flex items-center gap-2">
							<svg
								width="20"
								height="20"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M17 20h5v-2a4 4 0 00-5-4M9 20H4v-2a4 4 0 015-4m4-4a4 4 0 110-8 4 4 0 010 8z"
								></path>
							</svg>
						</div>
					</header>
					<div class="card-body">
						<div
							class="stats-grid"
							role="group"
							aria-label="Team statistics"
						>
							<div class="stat-card">
								<h3>Drivers Selected</h3>
								<p class="stat-value" aria-live="polite">
									<span id="selected-count">0</span>
								</p>
							</div>
							<div class="stat-card">
								<h3>Budget Remaining</h3>
								<p class="stat-value" aria-live="polite">
									£<span id="budget-remaining">0</span>
								</p>
							</div>
							<div class="stat-card">
								<h3>Team Value</h3>
								<p class="stat-value" aria-live="polite">
									£<span id="team-value">0</span>
								</p>
							</div>
						</div>

						<div
							class="team-actions-enhanced"
							role="group"
							aria-label="Team management actions"
						>
							<button
								id="clear-team-btn"
								class="btn btn-secondary"
								type="button"
								aria-label="Clear all selected drivers"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
									></path>
								</svg>
								Clear Team
							</button>

							<button
								id="save-team-btn"
								class="btn btn-primary"
								type="button"
								disabled
								aria-label="Save team selection"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M5 13l4 4L19 7"
									></path>
								</svg>
								Select Drivers First
							</button>
						</div>
					</div>
				</section>

				<!-- Filter and Search Section -->
				<section
					class="card"
					style="margin-bottom: var(--spacing-8)"
					aria-labelledby="filter-heading"
				>
					<header class="card-header">
						<h2 id="filter-heading">Filter & Search</h2>
						<div class="flex items-center gap-2">
							<svg
								width="20"
								height="20"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"
								></path>
							</svg>
						</div>
					</header>
					<div class="card-body">
						<div
							class="gap-4 items-center justify-between driver-actions"
							role="group"
							aria-label="Driver category filters"
						>
							<button
								class="btn btn-secondary filter-btn active"
								data-category="all"
								type="button"
								aria-pressed="true"
							>
								All Drivers
							</button>
							<button
								class="btn btn-secondary filter-btn"
								data-category="M"
								type="button"
								aria-pressed="false"
							>
								Category M
							</button>
							<button
								class="btn btn-secondary filter-btn"
								data-category="JS"
								type="button"
								aria-pressed="false"
							>
								Category JS
							</button>
							<button
								class="btn btn-secondary filter-btn"
								data-category="I"
								type="button"
								aria-pressed="false"
							>
								Category I
							</button>
						</div>
						<div class="flex gap-2 driver-tools">
							<input
								type="text"
								id="search-drivers"
								placeholder="Search drivers..."
								class="search-input"
								aria-describedby="search-help"
							/>
							<button
								id="sort-by-value"
								class="btn btn-secondary btn-sm"
								type="button"
								aria-label="Toggle sort by value or name"
							>
								<svg
									width="16"
									height="16"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"
									></path>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M8 5v6l3-3 3 3V5"
									></path>
								</svg>
								Sort by Value
							</button>
						</div>
					</div>
				</section>

				<!-- Selected Drivers Section -->
				<section
					id="selected-drivers-section"
					class="card"
					style="margin-bottom: var(--spacing-8); display: none"
					aria-labelledby="selected-drivers-heading"
				>
					<header class="card-header">
						<h2 id="selected-drivers-heading">Selected Drivers</h2>
						<div class="flex items-center gap-2">
							<svg
								width="20"
								height="20"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M5 13l4 4L19 7"
								></path>
							</svg>
						</div>
					</header>
					<div class="card-body">
						<div
							id="selected-drivers-grid"
							class="grid grid-cols-4"
							role="list"
							aria-label="Selected drivers"
						></div>
					</div>
				</section>

				<!-- Available Drivers Section -->
				<section
					class="card"
					aria-labelledby="available-drivers-heading"
				>
					<header class="card-header">
						<h2 id="available-drivers-heading">
							Available Drivers
						</h2>
						<div class="flex items-center gap-2">
							<svg
								width="20"
								height="20"
								fill="none"
								stroke="currentColor"
								viewBox="0 0 24 24"
								aria-hidden="true"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
								></path>
							</svg>
						</div>
					</header>
					<div class="card-body">
						<div
							id="drivers-grid"
							class="grid grid-cols-4"
							role="list"
							aria-label="Available drivers"
						></div>
						<div
							id="no-drivers"
							style="
								display: none;
								text-align: center;
								padding: var(--spacing-12);
							"
							role="status"
							aria-live="polite"
						>
							<div class="flex flex-col items-center">
								<svg
									width="48"
									height="48"
									fill="none"
									stroke="currentColor"
									viewBox="0 0 24 24"
									class="text-tertiary"
									aria-hidden="true"
								>
									<path
										stroke-linecap="round"
										stroke-linejoin="round"
										stroke-width="2"
										d="M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.034 0-3.9.785-5.291 2.06M6.343 6.343A8 8 0 1017.657 17.657 8 8 0 006.343 6.343z"
									></path>
								</svg>
								<div>
									<h3 style="margin-bottom: var(--spacing-2)">
										No drivers found
									</h3>
									<p>
										Try adjusting your search or filter
										criteria.
									</p>
								</div>
							</div>
						</div>
					</div>
				</section>
			</main>
		</div>

		<!-- Unauthorized Access Screen -->
		<div
			id="unauthorized"
			class="error-container"
			style="display: none"
			role="alert"
		>
			<div class="error-box">
				<div class="text-center mb-6">
					<div
						class="inline-flex items-center justify-center w-16 h-16 bg-error-color/10 rounded-full mb-4"
					>
						<svg
							class="w-8 h-8 text-error-color"
							fill="none"
							stroke="currentColor"
							viewBox="0 0 24 24"
							aria-hidden="true"
						>
							<path
								stroke-linecap="round"
								stroke-linejoin="round"
								stroke-width="2"
								d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"
							></path>
						</svg>
					</div>
				</div>
				<h1>Access Denied</h1>
				<p>You must be logged in to access this page.</p>
				<button
					type="button"
					id="unauthorized-login-btn"
					class="btn btn-primary btn-lg"
					onclick="window.location.href='/login.html'"
				>
					Go to Login
				</button>
			</div>
		</div>

		<!-- Loading Screen -->
		<div
			id="loading"
			class="loading"
			style="display: block"
			role="status"
			aria-live="polite"
		>
			<div class="spinner" aria-hidden="true"></div>
			<p>Loading drivers...</p>
		</div>

		<!-- Driver Card Template -->
		<template id="driver-card-template">
			<div
				class="driver-card"
				data-driver-id=""
				data-categories=""
				data-value=""
				role="listitem"
			>
				<div class="driver-categories" aria-label="Driver categories">
					<!-- Categories will be populated dynamically -->
				</div>
				<div class="driver-info">
					<h4 class="driver-name">Driver Name</h4>
					<p class="driver-value" aria-label="Driver value">£0.00</p>
				</div>
				<div class="driver-actions">
					<button
						class="btn btn-primary btn-sm select-driver-btn"
						type="button"
					>
						Select Driver
					</button>
					<button
						class="btn btn-danger btn-sm remove-driver-btn"
						type="button"
						style="display: none"
					>
						Remove
					</button>
				</div>
			</div>
		</template>

		<!-- Screen Reader Only Elements -->
		<div
			class="visually-hidden"
			id="screen-reader-announcements"
			aria-live="polite"
			aria-atomic="true"
		></div>

		<script type="module" src="js/select-drivers.js"></script>
	</body>
</html>
